module.exports = function updateBot(bot, track, state){ const target = track.checkpoints[bot.targetIndex % track.checkpoints.length]; const dx = target.x - bot.x; const dy = target.y - bot.y; const angTo = Math.atan2(dy,dx); let da = angTo - bot.angle; da = Math.atan2(Math.sin(da), Math.cos(da)); bot.steer = Math.max(-1, Math.min(1, da*2.4)); bot.throttle = 1; if (dx*dx+dy*dy < 1000) bot.targetIndex++; };